<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextStep - Academic Guidance</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/contact.css">
    <!-- Add subscription CSS -->
    <link rel="stylesheet" href="css/subscription.css">
</head>
<body>
    <!-- Include Header -->
    <div id="header-container"></div>

    <!-- Include Navigation -->
    <div id="nav-container"></div>

    <!-- Main Content -->
    <div class="container">
        <div class="generator-section" id="josaa">
            <h2><i class="fas fa-university"></i> JOSAA College Preference List Generator</h2>
            <p>Generate your personalized college preference list for Joint Seat Allocation Authority (JOSAA) counselling. 
               Our advanced algorithm considers cut-off trends, college rankings, and your preferences to create the optimal list.</p>
            <div class="feature-grid">
                <div class="feature-card">
                    <i class="fas fa-chart-line"></i>
                    <h3>Trend Analysis</h3>
                    <p>Historical cut-off analysis</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-medal"></i>
                    <h3>College Rankings</h3>
                    <p>NIRF & other rankings</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Location Based</h3>
                    <p>Geographical preferences</p>
                </div>
            </div>
            <a href="https://jossa18042025.onrender.com/" 
               class="btn generate-btn" 
               data-requires-login="true" 
               data-requires-premium="true" 
               data-href="https://jossa18042025.onrender.com/" 
               target="_blank">
                <i class="fas fa-magic"></i> Generate JOSAA Preference List
            </a>
        </div>

        <div class="generator-section" id="mhtcet">
            <h2><i class="fas fa-graduation-cap"></i> MHTCET College Preference List Generator</h2>
            <p>Create your customized college preference list for Maharashtra Common Entrance Test (MHT CET) counselling. 
               Our system analyzes location preferences, branch choices, and historical data to suggest the best options.</p>
            <div class="feature-grid">
                <div class="feature-card">
                    <i class="fas fa-history"></i>
                    <h3>Past Data</h3>
                    <p>Previous year analysis</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-building"></i>
                    <h3>College Info</h3>
                    <p>Detailed college profiles</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-check-circle"></i>
                    <h3>Smart Choices</h3>
                    <p>Intelligent suggestions</p>
                </div>
            </div>
            <a href="https://mhtcet-college-finder.onrender.com" 
               class="btn generate-btn" 
               data-requires-login="true" 
               data-requires-premium="true" 
               data-href="https://mhtcet-college-finder.onrender.com" 
               target="_blank">
                <i class="fas fa-magic"></i> Generate MHTCET Preference List
            </a>
        </div>

        <div class="generator-section" id="neet">
            <h2><i class="fas fa-stethoscope"></i> NEET-UG College Preference List Generator</h2>
            <p>Develop your strategic college preference list for NEET-UG counselling. 
               Leverage our comprehensive database and smart algorithms to make informed decisions about your medical education future.</p>
            <div class="feature-grid">
                <div class="feature-card">
                    <i class="fas fa-hospital"></i>
                    <h3>Hospital Rankings</h3>
                    <p>Associated hospital ratings</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-user-md"></i>
                    <h3>Specialization</h3>
                    <p>Course specializations</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-clipboard-check"></i>
                    <h3>Success Rate</h3>
                    <p>Placement statistics</p>
                </div>
            </div>
            <button class="btn" data-requires-login="true" data-requires-premium="true">
                <i class="fas fa-magic"></i> Generate NEET-UG List
            </button>
        </div>
    </div>

    <!-- Contact Section to add to index.html -->
<div class="generator-section" id="contact">
    <h2><i class="fas fa-envelope"></i> Contact Us</h2>
    <p>Have questions about our college preference list generators? Need help with your academic decisions? 
       Our team is here to assist you. Reach out to us through WhatsApp or email for prompt support.</p>
    
    <div class="contact-grid">
        <div class="contact-card">
            <i class="fab fa-whatsapp"></i>
            <h3>WhatsApp Support</h3>
            <p>Chat with our support team</p>
            <button id="open-whatsapp-chat" class="btn contact-btn">
                <i class="fab fa-whatsapp"></i> Start WhatsApp Chat
            </button>
        </div>
        
        <div class="contact-card">
            <i class="fas fa-envelope"></i>
            <h3>Email Support</h3>
            <p>Get detailed assistance</p>
            <a href="mailto:nextstep.india1@gmail.com" class="btn contact-btn">
                <i class="fas fa-paper-plane"></i> Email Us
            </a>
        </div>
    </div>
</div>

<!-- WhatsApp Chat Widget -->
<div id="whatsapp-chatbox" class="whatsapp-chatbox">
    <!-- Header -->
    <div class="whatsapp-header">
        <img src="nextstep_logo.jpeg" alt="NextStep Guide" class="whatsapp-avatar">
        <div class="whatsapp-header-text">
            <strong>NextStep Support</strong><br>
            <small>Typically replies in minutes</small>
        </div>
        <button id="close-whatsapp-chat" class="whatsapp-close-btn">
            <i class="fas fa-times"></i>
        </button>
    </div>
    <!-- Body -->
    <div class="whatsapp-body">
        <p>ðŸ‘‹ Hi! How can we help with your academic guidance today?</p>
        <a href="https://wa.me/9420444009?text=Hi%20NextStep!%20I%20need%20assistance%20with%20college%20selection." 
           target="_blank" class="whatsapp-start-btn">
            <i class="fab fa-whatsapp"></i> Start Chat
        </a>
    </div>
</div>

<!-- Floating WhatsApp Icon (will be controlled by JavaScript) -->
<div id="whatsapp-button" class="whatsapp-button">
    <i class="fab fa-whatsapp"></i>
</div>
    
    <!-- Include Footer -->
    <div id="footer-container"></div>

    <!-- Include Modal -->
    <div id="modal-container"></div>
    
    <!-- Include Subscription Modal Container -->
    <div id="subscription-modal-container"></div>

    <!-- Firebase and Scripts -->
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
      import { getAuth } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-analytics.js";

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyC7tvZe9NeHRhYuTVrQnkaSG7Nkj3ZS40U",
        authDomain: "nextstep-log.firebaseapp.com",
        projectId: "nextstep-log",
        storageBucket: "nextstep-log.firebasestorage.app",
        messagingSenderId: "9308831285",
        appId: "1:9308831285:web:d55ed6865804c50f743b7c",
        measurementId: "G-BPGP3TBN3N"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const analytics = getAnalytics(app);

      // Export auth for use in other scripts
      window.firebaseAuth = auth;
    </script>
    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/auth/index.js"></script>
    <script type="module" src="js/modal.js"></script>
    <script type="module" src="js/contact.js"></script>
    <script type="module" src="js/subscription-manager.js"></script>
    <script src="js/subscription-fixer.js"></script>
    <!-- Add this at the bottom of your index.html, just before the closing </body> tag -->
<div id="subscription-modal-container">
    <!-- components/subscription-modal.html -->
    <!-- Premium Subscription Modal -->
    <div id="subscriptionModal" class="modal">
        <div class="modal-content subscription-modal">
            <div class="modal-header">
                <h2><i class="fas fa-crown"></i> Premium Access Required</h2>
                <span class="close" id="close-subscription-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="subscription-message">
                    <p>To access our college preference list generators and other premium features, you need an active subscription.</p>
                </div>
                
                <div class="subscription-options">
                    <div class="subscription-option">
                        <h3><i class="fas fa-credit-card"></i> Pay Subscription Fee</h3>
                        <p>Make a payment using our secure Razorpay link and share the payment screenshot on WhatsApp to get your subscription code.</p>
                        <div class="option-actions">
                            <a href="https://razorpay.me/@nextstepguidance?amount=ZFm4ghdmeB6pF5PK8Ki64w%3D%3D" class="btn payment-btn" target="_blank">
                                <i class="fas fa-external-link-alt"></i> Pay Now
                            </a>
                            <a href="https://wa.me/9420444009?text=Hello!%20I've%20made%20the%20payment%20for%20NextStep%20Premium%20subscription.%20Please%20provide%20my%20subscription%20code." class="btn whatsapp-btn" target="_blank">
                                <i class="fab fa-whatsapp"></i> Contact on WhatsApp
                            </a>
                        </div>
                    </div>
                    
                    <div class="subscription-option">
                        <h3><i class="fas fa-key"></i> Enter Subscription Code</h3>
                        <p>If you already have a subscription code, enter it below to activate your premium access.</p>
                        <div class="subscription-form">
                            <div class="form-group">
                                <input type="text" id="subscription-code" placeholder="Enter your subscription code" class="subscription-input">
                                <div id="subscription-code-error" class="error-message"></div>
                            </div>
                            <button id="activate-subscription" class="btn activate-btn">
                                <i class="fas fa-check-circle"></i> Activate Premium
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add this debugging script just before the closing </body> tag -->
<script>
    // Debug the subscription modal loading
    console.log('Debug script for subscription modal loaded');
    
    // Check if modal elements exist after page load
    window.addEventListener('load', function() {
        console.log('Window loaded - checking subscription modal elements');
        
        // Check modal container
        const modalContainer = document.getElementById('subscription-modal-container');
        console.log('Modal container exists:', !!modalContainer);
        
        // Check main elements
        const subscriptionModal = document.getElementById('subscriptionModal');
        const activateButton = document.getElementById('activate-subscription');
        const subscriptionCodeInput = document.getElementById('subscription-code');
        const errorElement = document.getElementById('subscription-code-error');
        
        console.log('Modal elements check:', {
            subscriptionModal: !!subscriptionModal,
            activateButton: !!activateButton,
            subscriptionCodeInput: !!subscriptionCodeInput,
            errorElement: !!errorElement
        });
        
        // If all elements exist, add test event listener
        if (activateButton) {
            console.log('Adding test event listener to activate button');
            // Add a simple test click listener
            activateButton.addEventListener('click', function(e) {
                console.log('BUTTON TEST: Activate button clicked directly');
                console.log('Button properties:', {
                    disabled: activateButton.disabled,
                    innerHTML: activateButton.innerHTML
                });
            });
        }
        
        // Check for SubscriptionManager
        console.log('SubscriptionManager initialized:', !!window.SubscriptionManager);
        
        // Test FirebaseAuth
        console.log('FirebaseAuth initialized:', !!window.firebaseAuth);
    });
</script>
</body>
</html>
